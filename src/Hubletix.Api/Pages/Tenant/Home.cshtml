@page
@model HomeModel
@{
    ViewData["Title"] = $"{Model.CurrentTenantInfo?.Name ?? "Home"} - Home";
    Layout = "_PublicLayout";
}

@if (Model.HomePage.Components != null && Model.HomePage.Components.Count > 0)
{
    @foreach (HomePageComponentViewModel component in Model.HomePage.Components.OrderBy(c => c.Order))
    {
        @if (component is HeroComponentViewModel hero)
        {
            <partial name="_HeroComponent" model="new Tuple<HeroComponentViewModel, string?, string?>(hero, Model.HomePage.PrimaryColor, Model.HomePage.SecondaryColor)" />
        }
        else if (component is CardsComponentViewModel cards)
        {
            <partial name="_CardsComponent" model="new Tuple<CardsComponentViewModel, string?, string?>(cards, Model.HomePage.PrimaryColor, Model.HomePage.SecondaryColor)" />
        }
    }
}
else
{
    <!-- Default empty state -->
    <section class="py-5">
        <div class="container text-center">
            <div class="py-5">
                <h1 class="display-4 mb-3">Welcome to @Model.CurrentTenantInfo?.Name</h1>
                <p class="lead text-muted">Your homepage is being configured. Check back soon!</p>
            </div>
        </div>
    </section>
}
